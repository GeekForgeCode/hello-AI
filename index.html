<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>AI äººå·¥æ™ºèƒ½ åŠ¨æ€æ–‡æ¡£</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --sidebar-w: 280px; --theme-color: #3498db ; }
        body { margin: 0; font-family: sans-serif; display: flex; height: 100vh; color: #2c3e50; }

        /* ä¾§è¾¹æ æ ·å¼ */
        #sidebar { width: var(--sidebar-w); background: #f8f9fb; border-right: 1px solid #eaecef; display: flex; flex-direction: column; }
        .sidebar-header { padding: 25px; border-bottom: 1px solid #eaecef; }
        .logo { font-size: 24px; font-weight: bold; }
        .logo span { color: var(--theme-color); }

        .menu-container { flex: 1; overflow-y: auto; padding: 15px; }
        .group-title { font-size: 12px; color: #999; margin: 20px 0 10px; font-weight: bold; }
        .menu-item {
            padding: 10px; margin: 4px 0; cursor: pointer; border-radius: 6px;
            transition: 0.2s; font-size: 14px;
        }
        .menu-item:hover { background: #eee; }
        .menu-item.active { background: #fff3ed; color: var(--theme-color); font-weight: bold; }

        /* å³ä¾§å†…å®¹åŒºï¼šæ”¯æŒ Markdown æ¸²æŸ“æ ·å¼ */
        #content { flex: 1; overflow-y: auto; padding: 40px 60px; background: #fff; }
        .markdown-body { line-height: 1.6; max-width: 850px; margin: 0 auto; }
        .markdown-body h1 { border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .markdown-body pre { background: #f6f8fa; padding: 16px; border-radius: 6px; overflow: auto; }
        .markdown-body code { font-family: monospace; background: #afb8c133; padding: 2px 4px; border-radius: 4px; }
        .loading-tip { color: #999; font-style: italic; }
    </style>
</head>
<body>

<div id="app" style="display: flex; width: 100%;">
    <aside id="sidebar">
        <div class="sidebar-header">
            <div class="logo"><span>AI</span> äººå·¥æ™ºèƒ½å­¦ä¹ </div>
        </div>
        <nav class="menu-container">
            <div v-for="group in courseConfig" :key="group.group">
                <div class="group-title">=== {{ group.group }} ===</div>
                <div
                    v-for="doc in group.items"
                    :class="['menu-item', { active: currentFile === doc.file }]"
                    @click="loadMarkdown(doc.file)"
                >
                    <i class="fa-regular fa-file-lines" style="margin-right:8px"></i>
                    {{ doc.title }}
                </div>
            </div>
        </nav>
    </aside>

    <main id="content">
        <div v-if="loading" class="loading-tip">æ­£åœ¨åŠ è½½å†…å®¹...</div>
        <article v-else class="markdown-body" v-html="renderedHTML"></article>
    </main>
</div>

<script>
    // ğŸŒŸ è¿™é‡Œæ˜¯ä½ çš„â€œä¸­å¤®æ§åˆ¶å™¨â€
    const CONFIG = [
        {
            group: "ä¸€. AI ç³»ç»Ÿæ¦‚è¿°",
            items: [
                { title: "è¯¾ç¨‹æ¦‚è¿°", file: "overview.md" },
                { title: "æ¶æ„å›¾è§£æ", file: "architecture.md" }
            ]
        },
        {
            group: "äºŒ. AI ç¡¬ä»¶ä½“ç³»æ¶æ„",
            items: [
                { title: "GPU æ·±åº¦å­¦ä¹ ", file: "gpu.md" },
                { title: "å›½äº§èŠ¯ç‰‡è°ƒç ”", file: "china_chips.md" }
            ]
        }
    ];

    new Vue({
        el: '#app',
        data: {
            courseConfig: CONFIG,
            currentFile: '',
            renderedHTML: '',
            loading: false
        },
        methods: {
            async loadMarkdown(fileName) {
                this.currentFile = fileName;
                this.loading = true;
                try {
                    // ä½¿ç”¨ fetch ä» posts ç›®å½•è¯»å–æ–‡ä»¶
                    const response = await fetch(`./posts/${fileName}`);
                    if (!response.ok) throw new Error("æ–‡ä»¶ä¸å­˜åœ¨");
                    const text = await response.text();
                    // è°ƒç”¨ marked å°† md è½¬ä¸º html
                    this.renderedHTML = marked.parse(text);
                } catch (err) {
                    this.renderedHTML = `<h1 style="color:red">åŠ è½½å¤±è´¥</h1><p>${err.message}</p>`;
                } finally {
                    this.loading = false;
                }
            }
        },
        mounted() {
            // é»˜è®¤åŠ è½½ç¬¬ä¸€ä¸ª
            this.loadMarkdown(this.courseConfig[0].items[0].file);
        }
    });
</script>
</body>
</html>
